$(() => {


    $('#paymentMethod2').on('click', () => {
        $('#fundWalletSubmit').html('Show Instructions');
    });

    $('#paymentMethod1').on('click', () => {
        $('#fundWalletSubmit').html('Pay Securely');
    });


    $('#customAmount').on('keyup', () => {
        if ($('#customAmount').val() != "" && $("[name='paymentMethod']").is(':checked')) {
            $('#fundWalletSubmit').removeAttr('disabled');
        } else {
            $('#fundWalletSubmit').attr('disabled', 'disabled');
        }
    });

    $('#fundWalletForm').on('submit', (e) => {
        e.preventDefault();
        if ($('#customAmount').val() != "" && $('#paymentMethod2').is(':checked')) {
            let instructionsModal = $('#instructionsModal');
            instructionsModal.attr({ class: 'modal fade', 'data-backdrop': true, tabindex: "-1", 'aria-labelledby': "instructionsModalLabel", style: "display:none", 'aria-modal': "true", role: "dialog" });
            let elementString = `
            <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header bg-white">
                    <h6 class="modal-title m-0" id="instructionsModalLabel" style="color:#303e67">Fund Wallet With Bank Transfer</h6>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-12 py-2 text-center">
                           <i class="dripicons-information font-40"></i>
                        </div><!--end col-->
                        <div class="col-12 py-2 text-center">
                           <h3 class="mb-2">Are you sure?</h3>
                           <p class="">You are initiating a #30,000 fund request</p>
                        </div><!--end col-->
                        <div class="col-12 py-2 border-bottom d-flex justify-content-between">
                           <p>VAT Charge (7.5%)</p>
                           <p class="fw-bold">2,250</p>
                        </div><!--end col-->
                        <div class="col-12 py-2 d-flex justify-content-between">
                           <p class="mt-3">Total amount</p>
                           <p class="fw-bold mt-3">22,500</p>
                        </div><!--end col-->
                        <div class="col-12 mt-3 px-2 py-2 rounded-3" style="background-color:rgba(137,151,189,0.06);">
                            <p class="mb-0 font-11">Make a fund request by transfering &#x20A6;20000 to:</p>
                            <p class="mb-0 font-11"><span class="fw-bold">Account Name:</span> The Morgans Consortium</p>
                            <p class="mb-0 font-11"><span class="fw-bold">Bank:</span> Access Bank</p>  
                            <p class="font-11"><span class="fw-bold">Account Number:</span> 000892392389</p>
                            <p class="font-11">After transfer, please send this transaction reference(<span class="fw-bold">457536575558598</span>) and proof of payment to <a href="#">billings@oysterchecks.com</a></p>
                        </div>
                    </div><!--end row-->                                                      
                </div><!--end modal-body-->
                <div class="modal-footer">                                                    
                    <button type="button" class="btn btn-soft-primary btn-sm" data-bs-dismiss="modal">Ok, done!</button>
                    <button type="button" class="btn btn-soft-secondary btn-sm" id="cancelInstructionsModal">Cancel</button>
                </div><!--end modal-footer-->
            </div><!--end modal-content-->
        </div><!--end modal-dialog-->`;

            instructionsModal.html(elementString);

            $('#fundWallet').modal('hide');
            $('#instructionsModal').modal('show');

            //     let endpoint = window.location.origin+"/user/fund/request";
            //     fetch(endpoint,{
            //      method: 'POST',
            //      body: JSON.stringify({
            //          amount: $('#customAmount').val(),
            //          paymentMethod: $('#fundWalletForm:input[name="paymentMethod"]');
            //          _token: $('#fundWalletForm:input[name="_token"]')
            //      }),
            //      headers:{
            //          "Content-Type": "application/json"
            //      }
            //  })
            //  .then((response) => {
            //     return response.json();
            //  })
            //  .then((data) => {
            //     if (data.success== true){
            //        const instructions = document.createElement('DIV');
            //        instructions.attr({class:'row', id: 'showInstructions'});
            //        $elementString = `
            //        <div class="col-12 mt-3">
            //         <div class="card border-0" style="background-color:;">
            //         <div class="card-body">
            //         <div class="row">
            //         <div class="col-12">
            //             <p>Make a fund request by transfering &#x20A6;`+data.data.total_amount+` to:</p>
            //             <p></p>
            //         </div>
            //         </div>
            //         </div>
            //         </div>         
            //        </div>`;
            //        instructions.html();

            //     }
            //  })


        }
    });

    $('#cancelInstructionsModal').on('click', () => {
        $('#instructionsModal').modal('hide');
        $('#fundWallet').modal("show");
    });




});